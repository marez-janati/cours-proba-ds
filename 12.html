<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide Interactif : Processus Stochastiques & Cha√Ænes de Markov</title>
    
    <!-- MathJax Configuration for Single Dollar Sign -->
    <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Mermaid JS for Graphs -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>

    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-bg: #fff3cd;
            --warning-text: #856404;
            --tip-bg: #d1ecf1;
            --tip-text: #0c5460;
            --def-bg: #e2e3e5;
            --def-text: #383d41;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }

        h1, h2, h3 {
            color: var(--primary-color);
        }

        h1 {
            text-align: center;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        .problem-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid var(--accent-color);
        }

        .meta-info {
            font-size: 0.85em;
            color: #666;
            background: #eee;
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .question-box {
            font-weight: bold;
            margin: 15px 0;
        }

        /* Button Styles */
        .btn-toggle {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
            display: block;
            width: 100%;
            text-align: left;
            margin-top: 15px;
        }

        .btn-toggle:hover {
            background-color: #2980b9;
        }

        .btn-toggle::after {
            content: ' ‚ñº';
            float: right;
        }

        .btn-toggle.active::after {
            content: ' ‚ñ≤';
        }

        /* Solution Section (Hidden by default) */
        .solution-content {
            display: none;
            padding: 20px;
            background-color: #fdfdfd;
            border: 1px solid #ddd;
            border-top: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Pedagogical Boxes */
        .box {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 4px solid;
        }

        .warning {
            background-color: var(--warning-bg);
            color: var(--warning-text);
            border-color: #ffeeba;
        }

        .tip {
            background-color: var(--tip-bg);
            color: var(--tip-text);
            border-color: #bee5eb;
        }

        .definition {
            background-color: var(--def-bg);
            color: var(--def-text);
            border-color: #d6d8db;
        }

        .mini-exercise {
            border: 2px dashed var(--success-color);
            padding: 15px;
            margin-top: 20px;
            background: #f0fff4;
        }

        .mini-ex-answer {
            display: none;
            margin-top: 10px;
            font-weight: bold;
            color: var(--success-color);
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }

        .center-img {
            display: flex;
            justify-content: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <h1>üéì Simulation d'Examen : Processus Stochastiques</h1>
    <p style="text-align: center; font-size: 1.1em;">
        <em>Ce guide interactif couvre les processus de Poisson, les DTMC (Cha√Ænes de Markov √† Temps Discret) et les CTMC. <br>
        Pour simuler les conditions d'examen, les solutions sont masqu√©es par d√©faut.</em>
    </p>

    <!-- ================= PROBLEME 1 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : TD1 - Exercice 1 & Notes S√©ance 4</div>
        <h2>Probl√®me 1 : Les Urgences de l'H√¥pital (Poisson)</h2>
        
        <div class="definition">
            <strong>üìò Rappel :</strong> Pour un processus de Poisson de param√®tre $\alpha$, la probabilit√© d'avoir $k$ √©v√©nements est $P(X=k) = \frac{\alpha^k e^{-\alpha}}{k!}$.
        </div>

        <p><strong>√ânonc√© :</strong><br>
        Dans une urgence d'un h√¥pital, les patients arrivent selon un processus de Poisson avec une moyenne de <strong>6 patients/h</strong>.<br>
        Par ailleurs, des appels arrivent √† un centre d'appel avec une moyenne de <strong>4 appels/minute</strong>.</p>

        <div class="question-box">
            Questions :<br>
            1. Calculez la probabilit√© que durant une p√©riode de <strong>90 min</strong>, le nombre de patients arrivant √† l'urgence est :<br>
            &nbsp;&nbsp;&nbsp;a. Exactement 7.<br>
            &nbsp;&nbsp;&nbsp;b. Au moins 3.<br>
            2. Pour le centre d'appel :<br>
            &nbsp;&nbsp;&nbsp;a. Quel est le nombre moyen d'appels arrivant pendant <strong>2 min</strong>.<br>
            &nbsp;&nbsp;&nbsp;b. Quelle est la probabilit√© qu'aucun appel n'arrive pendant <strong>2 min</strong>.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol1')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol1" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <h4>1. Les Urgences (P√©riode de 90 min)</h4>
            <div class="warning">
                <strong>‚ö†Ô∏è Zone de Vigilance :</strong> Attention aux unit√©s de temps ! L'√©nonc√© donne un taux en heures, mais la question porte sur 90 minutes. Il faut convertir 90 min en 1,5 heure.
            </div>
            
            <ul>
                <li><strong>Calcul du param√®tre $\lambda$ :</strong> Moyenne = 6 patients/h. Pour 1,5 h : $\lambda = 6 \times 1.5 = 9$.<br>
                Donc $X \sim \mathcal{P}(9)$.</li>
            </ul>

            <table style="width:100%">
                <tr>
                    <th>Question</th>
                    <th>Calcul</th>
                    <th>R√©sultat</th>
                </tr>
                <tr>
                    <td>a) Exactement 7 patients</td>
                    <td>$P(X=7) = e^{-9} \frac{9^7}{7!}$</td>
                    <td>$\approx 0.117$</td>
                </tr>
                <tr>
                    <td>b) Au moins 3 patients ($X \ge 3$)</td>
                    <td>$1 - P(X < 3) = 1 - [P(0) + P(1) + P(2)]$ <br> $= 1 - e^{-9}(1 + 9 + \frac{81}{2})$</td>
                    <td>$\approx 1 - 50.5 e^{-9}$</td>
                </tr>
            </table>

            <h4>2. Le Centre d'Appel (P√©riode de 2 min)</h4>
            <ul>
                <li><strong>a) Nombre moyen ($\lambda$) :</strong> Taux = 4 appels/min. Sur 2 min : $\lambda = 4 \times 2 = 8$ appels.</li>
                <li><strong>b) Probabilit√© $X=0$ :</strong> $P(X=0) = e^{-8} \frac{8^0}{0!} = e^{-8}$.</li>
            </ul>
        </div>

        <!-- Mini Exercise -->
        <div class="mini-exercise">
            <strong>üß† Mini-Test :</strong> Si le taux √©tait de 10 clients par heure, quel serait le param√®tre $\lambda$ pour une dur√©e de 15 minutes ?
            <button onclick="toggleSolution('mini1')" style="margin-left:10px; padding:2px 8px; cursor:pointer;">V√©rifier</button>
            <div id="mini1" class="mini-ex-answer">
                R√©ponse : 15 min = 0.25 heure. Donc $\lambda = 10 \times 0.25 = 2.5$.
            </div>
        </div>
    </div>

    <!-- ================= PROBLEME 2 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : TD1 - Exercice 3 & Notes S√©ance 4</div>
        <h2>Probl√®me 2 : Les Deux Urnes (Mod√©lisation DTMC)</h2>

        <p><strong>√ânonc√© :</strong><br>
        Il y a deux urnes U1 et U2. Initialement, U1 contient deux boules <strong>rouges</strong>, U2 contient deux boules <strong>vertes</strong>.<br>
        Jeu : √Ä chaque tour, on tire une boule de U1 -> U2, puis une boule de U2 -> U1.<br>
        Soit $X_n$ le nombre de boules rouges dans U1.</p>

        <div class="question-box">
            Questions :<br>
            1. Quelles sont les valeurs possibles de $X_n$ ?<br>
            2. √âcrire la distribution initiale $\pi_0$.<br>
            3. Dessiner la cha√Æne de Markov et √©crire la matrice de transition $P$.<br>
            4. Calculer la distribution stationnaire $\pi$.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol2')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol2" class="solution-content">
            <h3>Solution D√©taill√©e</h3>

            <p><strong>1. Valeurs possibles :</strong> $X_n \in \{0, 1, 2\}$. (U1 peut avoir 0, 1 ou 2 Rouges).</p>
            <p><strong>2. Distribution initiale :</strong> $\pi_0 = [0, 0, 1]$ (car on commence avec 2 Rouges).</p>

            <p><strong>3. Matrice de Transition :</strong></p>
            <div class="center-img">
                <div class="mermaid">
                stateDiagram-v2
                    direction LR
                    0 --> 0: 1/3
                    0 --> 1: 2/3
                    1 --> 0: 1/6
                    1 --> 1: 2/3
                    1 --> 2: 1/6
                    2 --> 1: 2/3
                    2 --> 2: 1/3
                </div>
            </div>

            $$ P = \begin{pmatrix} 1/3 & 2/3 & 0 \\ 1/6 & 2/3 & 1/6 \\ 0 & 2/3 & 1/3 \end{pmatrix} $$

            <div class="tip">
                <strong>üí° Pro-Tip :</strong> V√©rifiez toujours que la somme de chaque ligne vaut 1. Ex ligne 2 : $1/6 + 2/3 + 1/6 = 1/6 + 4/6 + 1/6 = 6/6 = 1$. ‚úÖ
            </div>

            <p><strong>4. Stationnarit√© ($\pi P = \pi$) :</strong></p>
            En r√©solvant le syst√®me, on trouve par sym√©trie et substitution :
            $$ \pi = [1/6, 2/3, 1/6] $$
        </div>
    </div>

    <!-- ================= PROBLEME 3 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : DS IGL4+ICE3 - Exercice 1 & 3</div>
        <h2>Probl√®me 3 : Le Robot sur Trajectoire Circulaire</h2>

        <p><strong>√ânonc√© :</strong><br>
        Un robot se d√©place sur 3 secteurs (1, 2, 3). Horaire avec proba $p$, antihoraire avec proba $1-p$.</p>

        <div class="question-box">
            Questions :<br>
            1. Dessinez la cha√Æne et la matrice.<br>
            2. √âtudiez l'ergodicit√© selon $p$.<br>
            3. Calculez la distribution stationnaire.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol3')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol3" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <strong>1. Matrice $P$ :</strong>
            $$ P = \begin{pmatrix} 0 & p & 1-p \\ 1-p & 0 & p \\ p & 1-p & 0 \end{pmatrix} $$

            <strong>2. Ergodicit√© :</strong>
            <ul>
                <li>Si $p \in ]0, 1[$ : Irr√©ductible et Ap√©riodique (pgcd cycles = 1) $\to$ <strong>Ergodique</strong>.</li>
                <li>Si $p=0$ ou $1$ : D√©terministe et P√©riodique $\to$ Non ergodique.</li>
            </ul>

            <strong>3. Distribution Stationnaire :</strong>
            <div class="definition">
                <strong>üìò Th√©or√®me :</strong> Une matrice est <strong>doublement stochastique</strong> si la somme des lignes vaut 1 ET la somme des colonnes vaut 1. Dans ce cas, la distribution stationnaire est toujours <strong>uniforme</strong>.
            </div>
            Ici, la somme des colonnes vaut $(1-p)+p = 1$.
            $$ \pi = [1/3, 1/3, 1/3] $$
        </div>
    </div>

    <!-- ================= PROBLEME 4 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : DS IGL4+ICE3 - Exercice 2</div>
        <h2>Probl√®me 4 : Matrice d'√âtats Infinis</h2>

        <p><strong>√ânonc√© :</strong><br>
        Matrice infinie o√π $P_{0j} = \frac{1}{(j+1)(j+2)}$ et $P_{i, i-1} = 1$ pour $i \ge 1$.</p>

        <div class="question-box">
            Questions :<br>
            1. √âcrire formellement $P_{ij}$.<br>
            2. Relation entre $\pi_k$ et $\pi_0$.<br>
            3. Existence de la distribution stationnaire.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol4')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol4" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <p><strong>2. Relation de r√©currence :</strong><br>
            Apr√®s r√©solution du syst√®me $\pi P = \pi$, on trouve :
            $$ \pi_k = \frac{1}{k+1} \pi_0 $$</p>

            <p><strong>3. Existence :</strong><br>
            Pour normaliser, il faut $\sum \pi_k = 1$.
            $$ \pi_0 \sum_{k=0}^{\infty} \frac{1}{k+1} = 1 $$
            Or, $\sum \frac{1}{n}$ est la <strong>s√©rie harmonique</strong> qui diverge vers $+\infty$.
            $$ \pi_0 \times \infty = 1 \implies \pi_0 \to 0 $$
            <span style="color:red; font-weight:bold;">Conclusion :</span> Pas de distribution stationnaire (Cha√Æne nulle r√©currente).
            </p>
        </div>
    </div>

    <!-- ================= PROBLEME 5 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : DS - Exercice 3</div>
        <h2>Probl√®me 5 : Preuve Matrices Doublement Stochastiques</h2>

        <p><strong>√ânonc√© :</strong> Montrer que toute matrice $k \times k$ doublement stochastique admet la distribution uniforme.</p>

        <div class="question-box">
            Questions :<br>
            1. Exemple 4x4.<br>
            2. D√©monstration formelle.<br>
            3. V√©rification sur $P = \begin{pmatrix} 0.5 & 0.3 & 0.2 \\ 0.2 & 0.5 & 0.3 \\ 0.3 & 0.2 & 0.5 \end{pmatrix}$.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol5')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol5" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <p><strong>D√©monstration :</strong><br>
            On teste $\pi(i) = 1/k$.
            $$ (\pi P)_j = \sum_{i} \pi(i) P_{ij} = \sum_{i} \frac{1}{k} P_{ij} = \frac{1}{k} \underbrace{\sum_{i} P_{ij}}_{=1 \text{ (colonne)}} = \frac{1}{k} $$
            On retrouve bien le vecteur $\pi$. C.Q.F.D.</p>
            
            <p><strong>V√©rification :</strong> La matrice fournie a des sommes lignes = 1 et sommes colonnes = 1. Donc $\pi = [1/3, 1/3, 1/3]$.</p>
        </div>
        
        <div class="mini-exercise">
            <strong>üß† Mini-Test :</strong> La matrice identit√© $I$ est-elle doublement stochastique ? Quelle est sa distribution stationnaire ?
            <button onclick="toggleSolution('mini5')" style="margin-left:10px; padding:2px 8px; cursor:pointer;">V√©rifier</button>
            <div id="mini5" class="mini-ex-answer">
                Oui, somme ligne=1 et colonne=1. La distribution stationnaire est uniforme (mais attention, elle n'est pas ergodique car non irr√©ductible).
            </div>
        </div>
    </div>

    <!-- ================= PROBLEME 6 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : S√©ance 5 - Exercice 4</div>
        <h2>Probl√®me 6 : Cha√Æne √† 10 √âtats et P√©riodicit√©</h2>

        <p><strong>√ânonc√© :</strong><br>
        Graphe avec 10 √©tats (0-9). Cycles : $2 \to 3 \to 0$, $2 \to 1 \to 0$, grande boucle $0 \to 4 \to \dots \to 9 \to 0$.</p>

        <div class="question-box">
            Questions :<br>
            1. Irr√©ductibilit√© ?<br>
            2. P√©riode de l'√©tat 0 ?<br>
            3. Nouvelle p√©riode si on supprime l'√©tat 9 et ajoute $0 \to 8$.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol6')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol6" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <div class="mermaid">
            graph LR
                2 --> 3
                3 --> 0
                2 --> 1
                1 --> 0
                0 --> 4
                4 --> 5
                5 --> 6
                6 --> 7
                7 --> 8
                8 --> 9
                9 --> 0
            </div>

            <p><strong>1. Irr√©ductibilit√© :</strong> Oui, une seule classe, tout communique.</p>
            
            <p><strong>2. P√©riode (Cas initial) :</strong><br>
            Cycles possibles revenant √† 0 (longueurs) : 4 (petit cycle implicite 2-1-0 + entr√©e 0?) et 7 (grande boucle).<br>
            Note manuscrite : PGCD(4, 7) = 1.<br>
            <strong>Cha√Æne Ap√©riodique.</strong></p>

            <p><strong>3. Modification (Suppression √©tat 9) :</strong><br>
            Nouveaux cycles identifi√©s : 4 et 6.<br>
            PGCD(4, 6) = 2.<br>
            <strong>La cha√Æne devient P√©riodique (p√©riode 2).</strong></p>
        </div>
    </div>

    <!-- ================= PROBLEME 7 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : S√©ance 5 - Exercice 3</div>
        <h2>Probl√®me 7 : Cha√Æne Sp√©cifique √† 4 √âtats</h2>

        <p><strong>Transitions :</strong> $0 \to 1$ (1), $1 \to 0,1,2$, etc.</p>

        <div class="question-box">
            Questions :<br>
            1. Matrice $P$.<br>
            2. Calculer $\Pi$.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol7')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol7" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            $$ P = \begin{bmatrix} 0 & 1 & 0 & 0 \\ 1/4 & 1/2 & 1/4 & 0 \\ 0 & 1/2 & 0 & 1/2 \\ 0 & 0 & 1 & 0 \end{bmatrix} $$

            <strong>R√©solution du syst√®me :</strong>
            <ol>
                <li>$\pi_1 = 4\pi_0$</li>
                <li>$\pi_3 = 0.5\pi_2$</li>
                <li>Apr√®s substitution : $\pi_0 = 0.5\pi_2$</li>
            </ol>
            Normalisation : $0.5\pi_2 + 2\pi_2 + \pi_2 + 0.5\pi_2 = 1 \implies 4\pi_2 = 1$.
            
            <p class="box success">
                <strong>R√©sultat :</strong> $\Pi = [1/8, 1/2, 1/4, 1/8]$
            </p>
        </div>
    </div>

    <!-- ================= PROBLEME 8 ================= -->
    <div class="problem-container">
        <div class="meta-info">Source : R√©vision - Exercice 1</div>
        <h2>Probl√®me 8 : CTMC (Temps Continu)</h2>

        <p><strong>Matrice de taux (G√©n√©rateur Q) :</strong></p>
        $$ Q = \begin{bmatrix} -1/3 & 1/3 & 0 \\ 0 & -1/2 & 1/2 \\ 2 & 0 & -2 \end{bmatrix} $$

        <div class="question-box">
            Questions :<br>
            1. Type de cha√Æne ?<br>
            2. Distribution stationnaire $\Pi$.
        </div>

        <button class="btn-toggle" onclick="toggleSolution('sol8')">üëÅÔ∏è Voir la Solution D√©taill√©e</button>
        
        <div id="sol8" class="solution-content">
            <h3>Solution D√©taill√©e</h3>
            
            <div class="warning">
                <strong>‚ö†Ô∏è Diff√©rence DTMC / CTMC :</strong>
                <ul>
                    <li><strong>DTMC :</strong> Matrice $P$, sommes lignes = 1. √âquilibre : $\pi P = \pi$.</li>
                    <li><strong>CTMC :</strong> G√©n√©rateur $Q$, sommes lignes = 0. √âquilibre : $\pi Q = 0$.</li>
                </ul>
            </div>

            <p><strong>R√©solution ($\pi Q = 0$) :</strong><br>
            Syst√®me :
            $$ \begin{cases} -1/3\pi_0 + 2\pi_2 = 0 \\ 1/3\pi_0 - 1/2\pi_1 = 0 \\ \pi_0 + \pi_1 + \pi_2 = 1 \end{cases} $$
            
            On trouve : $\pi_2 = \frac{1}{6}\pi_0$ et $\pi_1 = \frac{2}{3}\pi_0$.<br>
            Normalisation : $\pi_0 (1 + 2/3 + 1/6) = 1 \implies \frac{11}{6}\pi_0 = 1$.
            </p>

            $$ \Pi = [\frac{6}{11}, \frac{4}{11}, \frac{1}{11}] $$
        </div>
    </div>

    <script>
        // Function to toggle solutions
        function toggleSolution(id) {
            var x = document.getElementById(id);
            var btn = event.currentTarget; // Get the button that was clicked
            
            if (x.style.display === "block") {
                x.style.display = "none";
                btn.classList.remove("active");
                // Only change text for main buttons, check if it contains specific text
                if(btn.innerHTML.includes("Voir la Solution")) {
                    btn.innerHTML = "üëÅÔ∏è Voir la Solution D√©taill√©e";
                }
            } else {
                x.style.display = "block";
                btn.classList.add("active");
                if(btn.innerHTML.includes("Voir la Solution")) {
                    btn.innerHTML = "‚ùå Masquer la Solution";
                }
            }
        }
    </script>

</body>
</html>


